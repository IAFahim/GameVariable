# üß† GameVariable.Intent

**The Brain.** A high-performance Hierarchical State Machine (HSM) for AI and Game Logic.

`GameVariable.Intent` provides a zero-allocation state machine structure (`IntentState`) generated by [StateSmith](https://github.com/StateSmith/StateSmith). It handles complex behavior trees, AI decision making, and nested states without the overhead of classes or delegates.

[![NuGet](https://img.shields.io/nuget/v/GameVariable.Intent?color=blue&label=NuGet)](https://www.nuget.org/packages/GameVariable.Intent)

## üì¶ Installation

```bash
dotnet add package GameVariable.Intent
```

## üî• Features

* **üå≤ Hierarchical**: Supports nested states (e.g., `Alive` -> `Combat` -> `Attacking`).
* **‚ö° Zero Allocation**: Pure `struct`-based state machine.
* **ü§ñ AI Ready**: Perfect for NPC behaviors, Quest logic, or Game Mode management.
* **üõ°Ô∏è Safe**: Compilation-time checking of transitions (thanks to StateSmith).

## üõ†Ô∏è Usage Guide

### 1. Initialization
You must start the state machine before using it.

```csharp
using GameVariable.Intent;

var fsm = new IntentState();
fsm.Start(); // Enters the ROOT state (and initial substate)
```

### 2. Dispatching Events
You drive the state machine by sending events.

```csharp
// Tell the FSM to get ready
fsm.DispatchEvent(IntentState.EventId.GET_READY);

// Tell it to start running a task
fsm.DispatchEvent(IntentState.EventId.START_RUNNING);

// Report completion
fsm.DispatchEvent(IntentState.EventId.COMPLETED_SUCCESSFULLY);
```

### 3. Checking State
You can inspect the current state (though usually you react to events).

```csharp
if (fsm.stateId == IntentState.StateId.RUNNING)
{
    // Do running logic
}
```

### 4. Integration with Loop
Typically you wrap this in a component or system.

```csharp
public class AIController : MonoBehaviour
{
    private IntentState _fsm;

    void Start()
    {
        _fsm = new IntentState();
        _fsm.Start();
    }

    void Update()
    {
        // Example: If player is close, activate
        if (Vector3.Distance(player.position, transform.position) < 10f)
        {
            _fsm.DispatchEvent(IntentState.EventId.ACTIVATED);
        }
    }
}
```

## üß© The State Graph
This FSM implements a specific lifecycle flow:
`CREATED` -> `WAITING` -> `RUNNING` -> `COMPLETED` (or `FAULTED`/`CANCELED`).

It is designed as a generic "Task" or "Intent" lifecycle that can be used for almost any asynchronous game action.

## ü§ù Contributing
Found a bug? PRs are welcome!
See the [Contributing Guide](../CONTRIBUTING.md) for details.

---
<div align="center">

**Part of the [GameVariable](https://github.com/iafahim/GameVariable) Ecosystem**
*Zero-allocation, high-performance game logic.*

</div>
